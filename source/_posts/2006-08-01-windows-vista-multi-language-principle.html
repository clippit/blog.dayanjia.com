---
layout: post
title: ! '[原]关于Vista5472多语言运作的初步分析+我对汉化不成功的几点猜想'
categories:
- 雕虫小技
tags:
- Microsoft
- Windows
published: true
comments: true
---
<p><span style="LINE-HEIGHT: 150%"><span style="FONT-SIZE: 9pt"><font size="2">由于我的英语水平目前只有初三毕业的水平，因此我对Vista5472的全英文界面抓狂不已，一直盼望着wbpluto版主大人推出汉化包，哪知道汉化效果只有10%，正犹如晴空霹雳一般划过我的脑门~~~于是，我决定自己动手，丰衣足食，经过几天的艰苦努力，总算得出了一点初步成果，希望能对Vista的汉化工作有所帮助（其实我偷偷告诉你，现在有一个最关键的东西还没有任何结果，因此目前来看尚未取得突破性进展，就现在来看汉化难度仍然很高！如果下面的是废话，也请包涵谅解）<br /><br />论坛上有网友说在winsxs文件夹里面也有一些和system32等地方同名的mui文件。虽然把这些文件替换后依然没有任何效果，但我认为，这个文件夹里面的内容有着关键的作用！<br /><br />我在俄罗斯的一个Vista的FanSite上，找到了5472的德语语言包，费了九牛二虎之力，在某境外代理服务器的帮助下，总算把他下载下来了。解包后发现，里面的文件和winsxs文件夹里的文件有着惊人的相似之处！（我指的是单从文件名来看）经过一些探索，我有了以下一些结论。由于文件数量浩繁，我以注册表编辑器的语言文件regedit.exe.mui和clb.dll.mui（这个文件是后来发现的）为例说明一下。<br /><br />以上者两个文件一个文件的位置都在（英语文件我用蓝色表示，德语文件我用绿色表示，下同）：</font><br /><font color="blue">\Windows\winsxs\x86_microsoft-windows-r..ry-editor.resources_31bf3856ad364e35_6.0.5472.5_en-us_295bc3124da4e457</font><br /><font color="green">\语言包目录\x86_microsoft-windows-r..ry-editor.resources_31bf3856ad364e35_6.0.5472.5_de-de_806aed195ec6d892</font><br /><br /><font size="2">分析一下，“x86_microsoft-windows-r..ry-editor.resources_31bf3856ad364e35_6.0.5472.5_”这个部分都是一样的，“31bf3856ad364e35”这个hash我猜想就是代表了注册表编辑器，接下来是代表英语(美国)的“<font color="blue">en-us</font>”和代表德语(德国)的“<font color="green">de-de</font>”，而最后面的hash值两者不同，尚不清楚算法。<br /><br />此外，还有两个文件和他们有着密不可分的关系：</font><br /><br /><font color="blue">\Windows\winsxs\Manifests\x86_microsoft-windows-r..ry-editor.resources_31bf3856ad364e35_6.0.5472.5_en-us_295bc3124da4e457.manifest</font><br /><font color="green">\语言包目录\x86_microsoft-windows-r..ry-editor.resources_31bf3856ad364e35_6.0.5472.5_de-de_806aed195ec6d892.manifest</font><br /><br /><font size="2">这两个文件的文件名和上面的目录名是一样的，实际上，这个文件是一个XML文件，可以用记事本等文本编辑器打开。打开以后有如下内容：</font><br /><br />
<div class="smalltxt" style="FONT-WEIGHT: bold; MARGIN-LEFT: 2em">QUOTE:</div>
<div class="altbg2" style="BORDER-RIGHT: #9eb6d8 1px solid; PADDING-RIGHT: 10px; BORDER-TOP: #9eb6d8 1px solid; PADDING-LEFT: 10px; PADDING-BOTTOM: 10px; MARGIN: 3px 2em 2em; BORDER-LEFT: #9eb6d8 1px solid; WORD-BREAK: break-all; PADDING-TOP: 10px; BORDER-BOTTOM: #9eb6d8 1px solid"><font color="blue">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&lt;assembly xmlns="urn:schemas-microsoft-com:asm.v3" manifestVersion="1.0" description="Windows Registry Editor Resources" displayName="Registry Editor Resources" company="Microsoft" creationTimeStamp="2003-10-14T03:29:25" lastUpdateTimeStamp="2003-10-20T21:15:20" isolated="false"&gt;<br />&nbsp;&nbsp;&lt;assemblyIdentity name="Microsoft-Windows-Registry-Editor.Resources" version="6.0.5472.5" processorArchitecture="x86" <b>language="en-US"</b> buildType="release" publicKeyToken="31bf3856ad364e35" versionScope="nonSxS" /&gt;<br />&nbsp;&nbsp;&lt;file <b>hash="56ebeac207cb4878d521cbb7f086dde881ff1562"</b> hashalg="SHA1" name="regedit.exe.mui" <b>destinationPath="＄(runtime.windows)\en-US\"</b> sourceName="regedit.exe.mui" sourcePath=".\" <b>importPath="＄(build.nttree)\loc\en-us\"</b>&gt;<br />&nbsp; &nbsp; &lt;securityDescriptor name="WRP_FILE_DEFAULT_SDDL" /&gt;<br />&nbsp; &nbsp; &lt;systemProtection xmlns="urn:schemas-microsoft-com:asm.v3" behavior="readOnlyFailWrites" perUserVirtualization="Disabled" /&gt;<br />&nbsp; &nbsp; &lt;asmv2:hash xmlns:asmv2="urn:schemas-microsoft-com:asm.v2"&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;dsig:Transforms xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;dsig:Transform Algorithm="urn:schemas-microsoft-com:HashTransforms.Identity" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;/dsig:Transforms&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;dsig:DigestMethod xmlns:dsig="http://www.w3.org/2000/09/xmldsig#" Algorithm="http://www.w3.org/2000/09/xmldsig#sha256" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;dsig:DigestValue xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"&gt;<b>BA8Eq8JWAuc9rVC5GQe7RiQ5X3y44yJmgI8fF2+GMw4=</b>&lt;/dsig:DigestValue&gt;<br />&nbsp; &nbsp; &lt;/asmv2:hash&gt;<br />&nbsp;&nbsp;&lt;/file&gt;<br />&nbsp;&nbsp;&lt;file <b>hash="91ca7f397f5fc9478973f68d897ccf189a42114d"</b> hashalg="SHA1" name="clb.dll.mui" <b>destinationPath="＄(runtime.system32)\en-US\"</b> sourceName="clb.dll.mui" sourcePath=".\" <b>importPath="＄(build.nttree)\loc\en-us\"</b>&gt;<br />&nbsp; &nbsp; &lt;securityDescriptor name="WRP_FILE_DEFAULT_SDDL" /&gt;<br />&nbsp; &nbsp; &lt;systemProtection xmlns="urn:schemas-microsoft-com:asm.v3" behavior="readOnlyFailWrites" perUserVirtualization="Disabled" /&gt;<br />&nbsp; &nbsp; &lt;asmv2:hash xmlns:asmv2="urn:schemas-microsoft-com:asm.v2"&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;dsig:Transforms xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;dsig:Transform Algorithm="urn:schemas-microsoft-com:HashTransforms.Identity" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;/dsig:Transforms&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;dsig:DigestMethod xmlns:dsig="http://www.w3.org/2000/09/xmldsig#" Algorithm="http://www.w3.org/2000/09/xmldsig#sha256" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;dsig:DigestValue xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"&gt;<b>YU0ZSFHpzDwbSKt/K7DjWzAwlBK3dps6QtAda189wes=</b>&lt;/dsig:DigestValue&gt;<br />&nbsp; &nbsp; &lt;/asmv2:hash&gt;<br />&nbsp;&nbsp;&lt;/file&gt;<br />&nbsp;&nbsp;&lt;trustInfo&gt;<br />&nbsp; &nbsp; &lt;security&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;accessControl&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;securityDescriptorDefinitions&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &lt;securityDescriptorDefinition name="WRP_FILE_DEFAULT_SDDL" sddl="O:S-1-5-80-956008885-3418522649-1831038044-1853292631-2271478464G:S-1-5-80-956008885-3418522649-1831038044-1853292631-2271478464D:P(A;;FA;;;S-1-5-80-956008885-3418522649-1831038044-1853292631-2271478464)(A;;GRGX;;;BA)(A;;GRGX;;;SY)(A;;GRGX;;;BU)S:(AU;FASA;0x000D0116;;;WD)" operationHint="replace" displayName="WRP_FILE_DEFAULT_SDDL" description="Default SDDL for Windows Resource Protected file" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;/securityDescriptorDefinitions&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;/accessControl&gt;<br />&nbsp; &nbsp; &lt;/security&gt;<br />&nbsp;&nbsp;&lt;/trustInfo&gt;<br />&nbsp;&nbsp;&lt;localization&gt;<br />&nbsp; &nbsp; &lt;resources <b>culture="en-US"</b>&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;stringTable&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;string id="description" value="Windows Registry Editor Resources" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;string id="displayName" value="Registry Editor Resources" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;/stringTable&gt;<br />&nbsp; &nbsp; &lt;/resources&gt;<br />&nbsp;&nbsp;&lt;/localization&gt;<br />&nbsp;&nbsp;&lt;rescache xmlns="urn:schemas-microsoft-com:rescache.v1" /&gt;<br />&lt;/assembly&gt;</font></div><br /><br />
<div class="smalltxt" style="FONT-WEIGHT: bold; MARGIN-LEFT: 2em">QUOTE:</div>
<div class="altbg2" style="BORDER-RIGHT: #9eb6d8 1px solid; PADDING-RIGHT: 10px; BORDER-TOP: #9eb6d8 1px solid; PADDING-LEFT: 10px; PADDING-BOTTOM: 10px; MARGIN: 3px 2em 2em; BORDER-LEFT: #9eb6d8 1px solid; WORD-BREAK: break-all; PADDING-TOP: 10px; BORDER-BOTTOM: #9eb6d8 1px solid"><font color="green"><br />&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&lt;assembly xmlns="urn:schemas-microsoft-com:asm.v3" manifestVersion="1.0" description="Windows Registry Editor Resources" displayName="Registry Editor Resources" company="Microsoft" creationTimeStamp="2003-10-14T03:29:25" lastUpdateTimeStamp="2003-10-20T21:15:20" isolated="false"&gt;<br />&nbsp;&nbsp;&lt;assemblyIdentity name="Microsoft-Windows-Registry-Editor.Resources" version="6.0.5472.5" processorArchitecture="x86" <b>language="de-DE"</b> buildType="release" publicKeyToken="31bf3856ad364e35" versionScope="nonSxS" /&gt;<br />&nbsp;&nbsp;&lt;file <b>hash="9b145d59afdf24f54a4682c3f6f3644a90f3260e"</b> hashalg="SHA1" name="regedit.exe.mui" <b>destinationPath="＄(runtime.windows)\de-DE\"</b> sourceName="regedit.exe.mui" sourcePath=".\" <b>importPath="＄(build.nttree)\loc\de-de\"</b>&gt;<br />&nbsp; &nbsp; &lt;securityDescriptor name="WRP_FILE_DEFAULT_SDDL" /&gt;<br />&nbsp; &nbsp; &lt;systemProtection xmlns="urn:schemas-microsoft-com:asm.v3" behavior="readOnlyFailWrites" perUserVirtualization="Disabled" /&gt;<br />&nbsp; &nbsp; &lt;asmv2:hash xmlns:asmv2="urn:schemas-microsoft-com:asm.v2"&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;dsig:Transforms xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;dsig:Transform Algorithm="urn:schemas-microsoft-com:HashTransforms.Identity" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;/dsig:Transforms&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;dsig:DigestMethod xmlns:dsig="http://www.w3.org/2000/09/xmldsig#" Algorithm="http://www.w3.org/2000/09/xmldsig#sha256" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;dsig:DigestValue xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"&gt;<b>A2x5qR5YocR2jVZnSOnHtgHD1TYCLRc6Y8fIxV8CG2Q=</b>&lt;/dsig:DigestValue&gt;<br />&nbsp; &nbsp; &lt;/asmv2:hash&gt;<br />&nbsp;&nbsp;&lt;/file&gt;<br />&nbsp;&nbsp;&lt;file <b>hash="918002060b1b73fb9bdce2caf6e8701d69cd077d"</b> hashalg="SHA1" name="clb.dll.mui"<b> destinationPath="＄(runtime.system32)\de-DE\"</b> sourceName="clb.dll.mui"<b> sourcePath=".\" importPath="＄(build.nttree)\loc\de-de\"</b>&gt;<br />&nbsp; &nbsp; &lt;securityDescriptor name="WRP_FILE_DEFAULT_SDDL" /&gt;<br />&nbsp; &nbsp; &lt;systemProtection xmlns="urn:schemas-microsoft-com:asm.v3" behavior="readOnlyFailWrites" perUserVirtualization="Disabled" /&gt;<br />&nbsp; &nbsp; &lt;asmv2:hash xmlns:asmv2="urn:schemas-microsoft-com:asm.v2"&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;dsig:Transforms xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;dsig:Transform Algorithm="urn:schemas-microsoft-com:HashTransforms.Identity" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;/dsig:Transforms&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;dsig:DigestMethod xmlns:dsig="http://www.w3.org/2000/09/xmldsig#" Algorithm="http://www.w3.org/2000/09/xmldsig#sha256" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;dsig:DigestValue xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"&gt;<b>0Vv9sJNrCjJ5MB+Jr1Z9QhAR6WKW+r63WpnoOv6VnkQ=</b>&lt;/dsig:DigestValue&gt;<br />&nbsp; &nbsp; &lt;/asmv2:hash&gt;<br />&nbsp;&nbsp;&lt;/file&gt;<br />&nbsp;&nbsp;&lt;trustInfo&gt;<br />&nbsp; &nbsp; &lt;security&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;accessControl&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;securityDescriptorDefinitions&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &lt;securityDescriptorDefinition name="WRP_FILE_DEFAULT_SDDL" sddl="O:S-1-5-80-956008885-3418522649-1831038044-1853292631-2271478464G:S-1-5-80-956008885-3418522649-1831038044-1853292631-2271478464D:P(A;;FA;;;S-1-5-80-956008885-3418522649-1831038044-1853292631-2271478464)(A;;GRGX;;;BA)(A;;GRGX;;;SY)(A;;GRGX;;;BU)S:(AU;FASA;0x000D0116;;;WD)" operationHint="replace" displayName="WRP_FILE_DEFAULT_SDDL" description="Default SDDL for Windows Resource Protected file" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;/securityDescriptorDefinitions&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;/accessControl&gt;<br />&nbsp; &nbsp; &lt;/security&gt;<br />&nbsp;&nbsp;&lt;/trustInfo&gt;<br />&nbsp;&nbsp;&lt;localization&gt;<br />&nbsp; &nbsp; &lt;resources <b>culture="de-DE"</b>&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;stringTable&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;string id="description" value="Windows Registry Editor Resources" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;string id="displayName" value="Registry Editor Resources" /&gt;<br />&nbsp; &nbsp;&nbsp; &nbsp;&lt;/stringTable&gt;<br />&nbsp; &nbsp; &lt;/resources&gt;<br />&nbsp;&nbsp;&lt;/localization&gt;<br />&nbsp;&nbsp;&lt;rescache xmlns="urn:schemas-microsoft-com:rescache.v1" /&gt;<br />&lt;/assembly&gt;<br /></font></div><font size="2">可以看到，这两个文件的内容实际上是差不多的，只有我加粗了的两个地方有所不同。这其中，又有一些是关于“en-US”和“de-DE”的不同，因此，真正有价值的就是那些hash值，因为有两个文件，所以上面的文件中有两个&lt;file&gt;段<br /><br />每一个文件都有两个hash，一个看上去比较“正规”，命名算法写的是“SHA1”，但是我用VisualHash算出的值却和文件里面的值不一样，不知道是我疏忽了什么地方还是怎么回事。另外一个hash更加匪夷所思，是“数字和英文大小写的加减乘除混合运算”，它使用的是什么算法也不得而知。由于我对这些知识了解不多，所以我也不敢妄下结论。如果有知道的朋友可以自行研究。此外，两个XML文件中多次出现了“<a href="http://www.w3.org/2000/09/xmldsig" target="_blank">http://www.w3.org/2000/09/xmldsig</a>”这样一个网址，点开以后是全英文的技术文档，我看不懂，能看懂的朋友可以去研究一下是什么原理。<br /><br />好了，下面我可以“大胆”地下我的结论了。Vista汉化不成功的“罪魁祸首”很有可能就是这个Hash，因为修改过的文件hash和以前不同了，Vista就不认了，但是它不认了以后调用的是哪里的文件呢？这个问题我下面再说，先插叙一下。<br /><br />版主的mui文件我觉得似乎没有修改到位，每个mui文件打开后都有一个mui的资源，由于是不可识别，因此是以16进制来显示的。每个mui文件的这一段都是不一样的，以下是英文原版regedit.exe.mui文件的mui段：</font><br /><br />
<div class="smalltxt" style="FONT-WEIGHT: bold; MARGIN-LEFT: 2em">QUOTE:</div>
<div class="altbg2" style="BORDER-RIGHT: #9eb6d8 1px solid; PADDING-RIGHT: 10px; BORDER-TOP: #9eb6d8 1px solid; PADDING-LEFT: 10px; PADDING-BOTTOM: 10px; MARGIN: 3px 2em 2em; BORDER-LEFT: #9eb6d8 1px solid; WORD-BREAK: break-all; PADDING-TOP: 10px; BORDER-BOTTOM: #9eb6d8 1px solid"><font face="宋体">Offset&nbsp; &nbsp;&nbsp; &nbsp;0&nbsp;&nbsp;1&nbsp;&nbsp;2&nbsp;&nbsp;3&nbsp;&nbsp;4&nbsp;&nbsp;5&nbsp;&nbsp;6&nbsp;&nbsp;7&nbsp; &nbsp;8&nbsp;&nbsp;9&nbsp;&nbsp;A&nbsp;&nbsp;B&nbsp;&nbsp;C&nbsp;&nbsp;D&nbsp;&nbsp;E&nbsp;&nbsp;F<br /><br />00000000&nbsp; &nbsp;CD FE CD FE C8 00 00 00&nbsp;&nbsp;00 00 01 00 00 00 00 00&nbsp; &nbsp;威威?..........<br />00000010&nbsp; &nbsp;12 00 00 00 00 00 00 00&nbsp;&nbsp;00 00 00 00 77 83 AC 77&nbsp; &nbsp;............w儸w<br />00000020&nbsp; &nbsp;74 EE FD 4F 28 A3 CC ED&nbsp;&nbsp;8D E6 CC 35 2C 04 49 D0&nbsp; &nbsp;t铨O(Ｌ韻嫣5,.I?<br />00000030&nbsp; &nbsp;0B 1C 40 82 F3 84 C2 85&nbsp;&nbsp;8B BF 42 2A 00 00 00 00&nbsp; &nbsp;..@傮劼厠緽*....<br />00000040&nbsp; &nbsp;00 00 00 00 00 00 00 00&nbsp;&nbsp;00 00 00 00 00 00 00 00&nbsp; &nbsp;................<br />00000050&nbsp; &nbsp;00 00 00 00 88 00 00 00&nbsp;&nbsp;0E 00 00 00 98 00 00 00&nbsp; &nbsp;....?......?..<br />00000060&nbsp; &nbsp;1C 00 00 00 00 00 00 00&nbsp;&nbsp;00 00 00 00 00 00 00 00&nbsp; &nbsp;................<br />00000070&nbsp; &nbsp;00 00 00 00 B8 00 00 00&nbsp;&nbsp;0C 00 00 00 00 00 00 00&nbsp; &nbsp;....?..........<br />00000080&nbsp; &nbsp;00 00 00 00 00 00 00 00&nbsp;&nbsp;4D 00 55 00 49 00 00 00&nbsp; &nbsp;........M.U.I...<br />00000090&nbsp; &nbsp;00 00 00 00 00 00 00 00&nbsp;&nbsp;03 00 00 00 04 00 00 00&nbsp; &nbsp;................<br />000000A0&nbsp; &nbsp;05 00 00 00 06 00 00 00&nbsp;&nbsp;09 00 00 00 0E 00 00 00&nbsp; &nbsp;................<br />000000B0&nbsp; &nbsp;10 00 00 00 00 00 00 00&nbsp;&nbsp;65 00 6E 00 2D 00 55 00&nbsp; &nbsp;........e.n.-.U.<br />000000C0&nbsp; &nbsp;53 00 00 00 00 00 00 00&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; S.......</font></div><font size="2">依我看可能需要把en-US全部修改为zh-CN。<br /><br />还有，有些文件的资源语系没有修改过来，仍然是1033(=0x0409)，也就是英语(美国)，需要把它们全部修改为2052(=0x0804)，也就是中文(中国)。<br /><br />经过这两步修改，才能真正把mui文件修改为中文(中国)的语言文件。这时候，根据目录排列，把相应的文件放进不同的文件夹内（比如说“\Windows\winsxs\x86_microsoft-windows-r..ry-editor.resources_31bf3856ad364e35_6.0.5472.5_zh-cn_16位未知Hash值”），并且修改相应的.manifest文件，就能完成完美的汉化！或者根据文件排列替换掉德语语言包内的文件，在“区域和语言选项”中就能通过安装的方式使用语言包，从某种意义上来说，这种方法是最完美的。<br /><br />这时候关键问题就出来了，那些Hash值是怎么算出来的？这就是关键中的关键，余认为，只要突破了这个技术难关，再花很长的时间和力气排列文件到相应的文件夹内，就能做出99%的“官方”中文语言包了。<br /><br />好吧，我承认，上面所说的只是一个雏形的技术框架，可能根本没有实用价值，但是毕竟有这个可能，哪怕这个可能性只有1‰。<br /><br />最后我来回答上面留下来的问题，对于这个问题的研究现在只是一点点很零散的内容。我把regedit.exe.mui文件按上述修改成“完全中文版”以后，替换了windows\system32\en-US里和\Windows\winsxs\x86_microsoft-windows-r..ry-editor.resources_31bf3856ad364e35_6.0.5472.5_en-us_295bc3124da4e457里 的原有文件，结果发现注册表编辑器根本不能启动了！双击以后没有任何反应！我估计这有可能就是Hash验证不过关导致的。具体的更多的对比实验我还没有进行。补充一点，目前那个德语的语言包我还没有安装，等安装后可以再进一步研究。<br /><br />老实说，Vista采用了全新的多语言运作方式，在没有任何微软技术文档的前提下，想要完全了解它，是几乎不可能的！！！！！！！！<br /><br />至于为什么在安全模式下能够正常显示中文，我想，这是因为安全模式比较“安全”，所以就没有进行Hash验证，就默认使用修改过的文件了。<br /><br />不知道我上述的推理能不能说服大家，大家是扔鲜花也好，扔板砖也好，这并不重要。关键问题是，我希望能在微软“磨洋工”发布RC1的中文语言包之前，能够暂时和英文说一声：再见！</font></span> </span></p>
